<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Profile</title>
  <link rel="stylesheet" href="/style.css">
  <script>
    function confirmDelete(id) {
      if (confirm("Are you sure you want to delete this profile? This action cannot be undone.")) {
        window.location.href = "/delete/" + id;
      }
    }
  </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Edit Profile</h1>
    </header>

    <form action="/edit/<%= profile._id %>" method="POST" enctype="multipart/form-data">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" value="<%= profile.name %>" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" value="<%= profile.email %>" required>

      <label for="interests">Interests:</label>
      <input type="text" id="interests" name="interests" value="<%= Array.isArray(profile.interests) ? profile.interests.join(', ') : profile.interests %>">

      <!-- Display current profile picture -->
      <label>Current Profile Picture:</label>
      <div class="profile-picture-container">
        <img src="/images/<%= profile.profilePicture %>" 
             alt="Profile Picture" 
             width="150" 
             onerror="this.onerror=null; this.src='/images/default.png';">
      </div>

      <!-- Upload new profile picture -->
      <label for="profilePicture">Upload New Profile Picture:</label>
      <input type="file" id="profilePicture" name="profilePicture" accept="image/*">

      <button type="submit">Update Profile</button>
    </form>

    <button onclick="confirmDelete('<%= profile._id %>')" class="delete-btn">Delete Profile</button>

    <a href="/">Back to Home</a>
  </div>
</body>
</html>
